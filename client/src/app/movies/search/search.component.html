<div class="movie-search">
  <form novalidate (ngSubmit)="onSubmit()" [formGroup]="searchQuery">
    <div class="search-input" 
      [class.active]="searchQuery.get('query').touched || searchQuery.get('query').dirty"
      [class.active-not-valid]="searchQuery.get('query').invalid && searchQuery.get('query').dirty">
      <input type="text" placeholder="Search for a movie..." formControlName="query">
      <button type="submit" [disabled]="searchQuery.invalid">
        <i class="fa fa-search input-item" aria-hidden="true"></i>
      </button>
    </div>
    <div class="error-missing-query" 
      [hidden]="searchQuery.get('query').valid || searchQuery.get('query').pristine">
      Search query required!
    </div>
  </form>
</div>

<div *ngIf="movies && !error">
  <search-results [movies]="movies" [query]="searchQuery.value.query || cachedQuery"></search-results>
</div>

<div class="error" *ngIf="error && !movies">
  <div class="message">
    Something went wrong! <br> Please try again shortly.
  </div>
  <div class="broken">
    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
  </div>
</div>
